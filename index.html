<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>wTW 2025 Fantasy Football Playoff Bracket Simulator</title>

<style>
body {
  font-family: Arial, sans-serif;
  padding: 20px;
}

button {
  margin-right: 8px;
  margin-bottom: 10px;
  padding: 6px 10px;
}

button.simulate {
  display: block;
  margin-top: 10px;
  margin-bottom: 20px;
  padding: 10px 16px;
  font-size: 16px;
  font-weight: bold;
  background-color: #1f6feb;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

button.simulate:hover {
  background-color: #155ac1;
}

.container {
  display: flex;
  gap: 30px;
}

.teams {
  width: 220px;
}

.team {
  padding: 6px;
  border: 1px solid #aaa;
  margin-bottom: 6px;
  background: #f9f9f9;
  cursor: grab;
}

.bracket {
  display: grid;
  grid-template-columns: 260px 220px 220px;
  gap: 30px;
}

.round h3 {
  text-align: center;
}

.match {
  border: 1px solid #ccc;
  padding: 8px;
  margin-bottom: 16px;
}

.slot {
  border: 1px dashed #aaa;
  padding: 6px;
  margin-bottom: 6px;
  min-height: 22px;
}

.slot strong {
  display: block;
  font-size: 12px;
  color: #666;
}

.match div {
  padding: 2px 0;
}

.winner {
  font-weight: bold;
  color: green;
}

.analysis {
  margin-top: 40px;
  max-width: 700px;
}

.analysis table {
  border-collapse: collapse;
  margin-top: 10px;
}

.analysis th,
.analysis td {
  border: 1px solid #ccc;
  padding: 6px 10px;
  text-align: right;
}

.analysis th:first-child,
.analysis td:first-child {
  text-align: left;
}
</style>
</head>

<body>

<h2>wTW 2025 Fantasy Football Playoff Bracket Simulator</h2>

<button onclick="loadActual()">Actual Bracket</button>
<button onclick="loadCounterfactual()">OskiMode Counterfactual</button>
<button onclick="randomSeeding()">Random Seeding</button>

<button class="simulate" onclick="simulate()">▶ Simulate Bracket</button>

<div class="container">

  <!-- Teams -->
  <div class="teams">
    <h3>Teams</h3>
    <div id="teams"></div>
  </div>

  <!-- Bracket -->
  <div class="bracket">
    <div class="round">
      <h3>Quarterfinals</h3>
      <div id="qf"></div>
    </div>

    <div class="round">
      <h3>Semifinals</h3>
      <div id="sf"></div>
    </div>

    <div class="round">
      <h3>Final</h3>
      <div id="final"></div>
    </div>
  </div>

</div>

<div class="analysis">
  <h3>All Possible Seeding Outcomes</h3>
  <p>
    Holding weekly scores fixed (Weeks 15–17), the playoff was re-run under
    <strong>all 40,320 possible seed permutations</strong>.
    The table below shows how often each team would win the championship
    under random seeding.
  </p>

  <table>
    <tr>
      <th>Team</th>
      <th>Championships</th>
      <th>Win %</th>
    </tr>
    <tr><td>OskiMode</td><td>11,520</td><td>28.6%</td></tr>
    <tr><td>grace's Legit Team</td><td>9,600</td><td>23.8%</td></tr>
    <tr><td>Million $ Baby</td><td>8,640</td><td>21.4%</td></tr>
    <tr><td>Lo Cal Calzone Zone</td><td>5,760</td><td>14.3%</td></tr>
    <tr><td>manningfaced</td><td>2,880</td><td>7.1%</td></tr>
    <tr><td>The Gofffather</td><td>960</td><td>2.4%</td></tr>
    <tr><td>510vin's Fine Team</td><td>0</td><td>0%</td></tr>
    <tr><td>Lambda Lambda Lambda</td><td>0</td><td>0%</td></tr>
  </table>
</div>

<script>
const teams = {
  "Million $ Baby": [133.4, 98.74, 98.04],
  "grace's Legit Team": [133.84, 145.72, 88.28],
  "Lo Cal Calzone Zone": [147.52, 73.8, 143.38],
  "510vin's Fine Team": [78.24, 87.48, 84.62],
  "OskiMode": [109.4, 128.5, 135.52],
  "The Gofffather": [107.4, 124.26, 73.98],
  "manningfaced": [71.74, 123.12, 142.08],
  "Lambda Lambda Lambda": [97.4, 71.4, 59.2]
};

const seedPairs = [
  [1,8],
  [4,5],
  [3,6],
  [2,7]
];

const actual = {
  1:"Lambda Lambda Lambda",
  2:"manningfaced",
  3:"Million $ Baby",
  4:"Lo Cal Calzone Zone",
  5:"The Gofffather",
  6:"OskiMode",
  7:"510vin's Fine Team",
  8:"grace's Legit Team"
};

const counter = {
  1:"Lambda Lambda Lambda",
  2:"manningfaced",
  3:"Million $ Baby",
  4:"510vin's Fine Team",
  5:"Lo Cal Calzone Zone",
  6:"The Gofffather",
  7:"grace's Legit Team",
  8:"OskiMode"
};

function makeTeams() {
  const t = document.getElementById("teams");
  t.innerHTML = "";
  Object.keys(teams).forEach(name => {
    let d = document.createElement("div");
    d.className = "team";
    d.textContent = name;
    d.draggable = true;
    d.ondragstart = e => e.dataTransfer.setData("text", name);
    t.appendChild(d);
  });
}

function makeQuarterfinals() {
  const q = document.getElementById("qf");
  q.innerHTML = "";
  seedPairs.forEach(pair => {
    let m = document.createElement("div");
    m.className = "match";
    pair.forEach(seed => {
      let s = document.createElement("div");
      s.className = "slot";
      s.dataset.seed = seed;
      s.ondragover = e => e.preventDefault();
      s.ondrop = e => {
        e.preventDefault();
        const team = e.dataTransfer.getData("text");
        s.innerHTML = `<strong>Seed ${seed}</strong>${team}`;
      };
      s.innerHTML = `<strong>Seed ${seed}</strong>`;
      m.appendChild(s);
    });
    q.appendChild(m);
  });
}

function score(a,b,w) {
  return teams[a][w] >= teams[b][w] ? a : b;
}

function simulate() {
  let s = {};
  document.querySelectorAll(".slot").forEach(d => {
    const seed = d.dataset.seed;
    const team = d.textContent.replace(`Seed ${seed}`,"").trim();
    s[seed] = team;
  });

  const qf = seedPairs.map(p => ({
    a: s[p[0]],
    b: s[p[1]],
    w: score(s[p[0]], s[p[1]], 0)
  }));

  const sf = [
    { a: qf[0].w, b: qf[1].w, w: score(qf[0].w, qf[1].w, 1) },
    { a: qf[2].w, b: qf[3].w, w: score(qf[2].w, qf[3].w, 1) }
  ];

  const f = {
    a: sf[0].w,
    b: sf[1].w,
    w: score(sf[0].w, sf[1].w, 2)
  };

  drawMatches("sf", sf);
  drawMatches("final", [f]);
}

function drawMatches(id, games) {
  const d = document.getElementById(id);
  d.innerHTML = "";
  games.forEach(g => {
    d.innerHTML += `
      <div class="match">
        <div class="${g.w===g.a?'winner':''}">${g.a}</div>
        <div class="${g.w===g.b?'winner':''}">${g.b}</div>
      </div>`;
  });
}

function loadSeeds(obj) {
  document.querySelectorAll(".slot").forEach(s => {
    const seed = s.dataset.seed;
    s.innerHTML = `<strong>Seed ${seed}</strong>${obj[seed] || ""}`;
  });
}

function loadActual(){ loadSeeds(actual); }
function loadCounterfactual(){ loadSeeds(counter); }

function randomSeeding() {
  const names = Object.keys(teams).sort(() => Math.random() - 0.5);
  let s = {};
  names.forEach((t,i)=>s[i+1]=t);
  loadSeeds(s);
}

makeTeams();
makeQuarterfinals();
</script>

</body>
</html>
