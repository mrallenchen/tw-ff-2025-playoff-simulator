<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Fantasy Playoff Bracket Simulator</title>

<style>
body { font-family: Arial, sans-serif; padding: 20px; }

button { margin-right: 8px; margin-bottom: 10px; }

.bracket {
  display: grid;
  grid-template-columns: 220px 220px 220px;
  gap: 30px;
  margin-top: 20px;
}

.round h3 { text-align: center; }

.match {
  border: 1px solid #ccc;
  padding: 6px;
  margin-bottom: 14px;
}

.team {
  padding: 4px;
  cursor: grab;
}

.winner {
  font-weight: bold;
  color: green;
}

.seedbox {
  border: 1px dashed #aaa;
  padding: 6px;
  margin-bottom: 6px;
}

.seedbox div {
  cursor: grab;
}
</style>
</head>

<body>

<h2>Fantasy Football Playoff Bracket Simulator</h2>

<button onclick="loadActual()">Actual Bracket</button>
<button onclick="loadCounterfactual()">OskiMode Counterfactual</button>
<button onclick="randomSeeding()">Random Seeding</button>
<button onclick="simulate()">Simulate</button>

<h3>Seeds (drag teams between seeds)</h3>
<div id="seeds"></div>

<div class="bracket">
  <div class="round">
    <h3>Quarterfinals</h3>
    <div id="qf"></div>
  </div>

  <div class="round">
    <h3>Semifinals</h3>
    <div id="sf"></div>
  </div>

  <div class="round">
    <h3>Final</h3>
    <div id="final"></div>
  </div>
</div>

<script>
const teams = {
  "Million $ Baby": [133.4, 98.74, 98.04],
  "grace's Legit Team": [133.84, 145.72, 88.28],
  "Lo Cal Calzone Zone": [147.52, 73.8, 143.38],
  "510vin's Fine Team": [78.24, 87.48, 84.62],
  "OskiMode": [109.4, 128.5, 135.52],
  "The Gofffather": [107.4, 124.26, 73.98],
  "manningfaced": [71.74, 123.12, 142.08],
  "Lambda Lambda Lambda": [97.4, 71.4, 59.2]
};

const seedOrder = [1,8,4,5,3,6,2,7];

const actual = {
  1:"Lambda Lambda Lambda",2:"manningfaced",3:"Million $ Baby",4:"Lo Cal Calzone Zone",
  5:"The Gofffather",6:"OskiMode",7:"510vin's Fine Team",8:"grace's Legit Team"
};

const counter = {
  1:"Lambda Lambda Lambda",2:"manningfaced",3:"Million $ Baby",4:"510vin's Fine Team",
  5:"Lo Cal Calzone Zone",6:"The Gofffather",7:"grace's Legit Team",8:"OskiMode"
};

function makeSeeds() {
  const s = document.getElementById("seeds");
  s.innerHTML = "";
  for (let i=1;i<=8;i++) {
    let box = document.createElement("div");
    box.className = "seedbox";
    box.dataset.seed = i;
    box.ondragover = e => e.preventDefault();
    box.ondrop = e => {
      e.preventDefault();
      box.innerHTML = `<div draggable="true">${e.dataTransfer.getData("text")}</div>`;
      makeDraggable();
    };
    box.innerHTML = `Seed ${i}`;
    s.appendChild(box);
  }
}

function makeDraggable() {
  document.querySelectorAll("[draggable]").forEach(d => {
    d.ondragstart = e => e.dataTransfer.setData("text", d.textContent);
  });
}

function loadSeeds(obj) {
  makeSeeds();
  Object.entries(obj).forEach(([k,v]) => {
    const box = document.querySelector(`[data-seed='${k}']`);
    box.innerHTML = `<div draggable="true">${v}</div>`;
  });
  makeDraggable();
}

function randomSeeding() {
  const names = Object.keys(teams).sort(() => Math.random() - 0.5);
  let s = {};
  names.forEach((t,i)=>s[i+1]=t);
  loadSeeds(s);
}

function score(a,b,w) {
  return teams[a][w] >= teams[b][w] ? a : b;
}

function simulate() {
  let s = {};
  document.querySelectorAll(".seedbox").forEach(b => {
    s[b.dataset.seed] = b.textContent.replace("Seed "+b.dataset.seed,"").trim();
  });

  const qf = [];
  for (let i=0;i<seedOrder.length;i+=2) {
    qf.push({
      a: s[seedOrder[i]],
      b: s[seedOrder[i+1]],
      w: score(s[seedOrder[i]], s[seedOrder[i+1]], 0)
    });
  }

  const sf = [
    { a:qf[0].w, b:qf[1].w, w:score(qf[0].w,qf[1].w,1) },
    { a:qf[2].w, b:qf[3].w, w:score(qf[2].w,qf[3].w,1) }
  ];

  const f = score(sf[0].w, sf[1].w, 2);

  draw("qf", qf);
  draw("sf", sf);
  draw("final", [{a:sf[0].w,b:sf[1].w,w:f}]);
}

function draw(id, games) {
  const d = document.getElementById(id);
  d.innerHTML = "";
  games.forEach(g => {
    d.innerHTML += `
      <div class="match">
        <div class="${g.w===g.a?'winner':''}">${g.a}</div>
        <div class="${g.w===g.b?'winner':''}">${g.b}</div>
      </div>`;
  });
}

function loadActual(){ loadSeeds(actual); }
function loadCounterfactual(){ loadSeeds(counter); }

makeSeeds();
</script>

</body>
</html>
